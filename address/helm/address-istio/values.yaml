# Default values for address-istio
# This is a YAML-formatted file.

# Gateway configuration
gateway:
  name: address-gateway
  host: "*"
  selector:
    istio: ingressgateway

# Service configuration
service:
  name: address
  namespace: address
  grpcPort: 9010
  httpPort: 9011

# Virtual service configuration
virtualService:
  retries:
    attempts: 3
    perTryTimeout: 10s
    retryOn: connect-failure,refused-stream,unavailable,cancelled,retriable-status-codes
  timeout: 30s

# Destination rule configuration
destinationRule:
  connectionPool:
    http:
      h2UpgradePolicy: UPGRADE
      http2MaxRequests: 100
      maxRequestsPerConnection: 10
  outlierDetection:
    consecutive5xxErrors: 3
    interval: 30s
    baseEjectionTime: 30s
    maxEjectionPercent: 50
  tls:
    mode: ISTIO_MUTUAL

# Peer authentication (mTLS)
peerAuthentication:
  mtls:
    mode: STRICT
